#include <btc/chainparams.h>
#include "altchainparams.h"

const char *CURRENCY = "btc;dash;ltc;zec";

typedef struct currency_key_ {
    int type;
    char name[NAME_LABEL_LEN];
    char len;
    char key[KEY_LABEL_LEN];
} currency_key;

static const currency_key currency_type[] = {
    {BTC_XPUB, "btc",  3, "xpub"}, 
    {BTC_YPUB, "btc",  3, "ypub"},
    {DASH_XPUB, "dash", 4, "xpub"},
    {DASH_DRKP, "dash", 4, "drkp"},
    {LTC_MTUB, "ltc",  3, "Mtub"},
    {LTC_XPUB, "ltc",  3, "xpub"},
    /*{LTC_YPUB, "LTC",  3, "ypub"},*/
    {ZEC_XPUB, "zec",  3, "xpub"},
    /*{ZEC_YPUB, "ZEC",  3, "ypub"},*/
};

const btc_chainparams dash_chainparams_xpub = {
    "main",
    0x4c,
    0x10,
    "dash",
    0xcc,
    0x0488ade4,
    0x0488b21e,
    {0xbf, 0x0c, 0x6b, 0xbd},
    {0x6f, 0xe2, 0x8c, 0x0a, 0xb6, 0xf1, 0xb3, 0x72, 0xc1, 0xa6, 0xa2, 0x46, 0xae, 0x63, 0xf7, 0x4f, 0x93, 0x1e, 0x83, 0x65, 0xe1, 0x5a, 0x08, 0x9c, 0x68, 0xd6, 0x19, 0x00, 0x00, 0x00, 0x00, 0x00},
    8333,
    {{"seed.bitcoin.jonasschnelli.ch"}, 0},
};

//drkp!? = 0x0488ade4,
const btc_chainparams dash_chainparams_drkp = {
    "main",
    0x4c,
    0x10,
    "dash",
    0xcc,
    0x0488ade4,
    0x02fe52cc,
    {0xbf, 0x0c, 0x6b, 0xbd},
    {0x6f, 0xe2, 0x8c, 0x0a, 0xb6, 0xf1, 0xb3, 0x72, 0xc1, 0xa6, 0xa2, 0x46, 0xae, 0x63, 0xf7, 0x4f, 0x93, 0x1e, 0x83, 0x65, 0xe1, 0x5a, 0x08, 0x9c, 0x68, 0xd6, 0x19, 0x00, 0x00, 0x00, 0x00, 0x00},
    8333,
    {{"seed.bitcoin.jonasschnelli.ch"}, 0},
};

const btc_chainparams ltc_chainparams_mtub = {
    "main",
    0x30,
    0x32,
    "ltc",
    0xb0,
    0x01b26792,
    0x01b26ef6,
    {0xfb, 0xc0, 0xb6, 0xdb},
    {0x6f, 0xe2, 0x8c, 0x0a, 0xb6, 0xf1, 0xb3, 0x72, 0xc1, 0xa6, 0xa2, 0x46, 0xae, 0x63, 0xf7, 0x4f, 0x93, 0x1e, 0x83, 0x65, 0xe1, 0x5a, 0x08, 0x9c, 0x68, 0xd6, 0x19, 0x00, 0x00, 0x00, 0x00, 0x00},
    8333,
    {{"seed.bitcoin.jonasschnelli.ch"}, 0},
};

const zec_chainparams zec_chainparams_xpub = {
    "main",
    0xb81c,
    0xbd1c,
    "zec",
    0x80,
    0x0488ade4,
    0x0488b21e,
    {0x24, 0xe9, 0x27, 0x64},
    {0x6f, 0xe2, 0x8c, 0x0a, 0xb6, 0xf1, 0xb3, 0x72, 0xc1, 0xa6, 0xa2, 0x46, 0xae, 0x63, 0xf7, 0x4f, 0x93, 0x1e, 0x83, 0x65, 0xe1, 0x5a, 0x08, 0x9c, 0x68, 0xd6, 0x19, 0x00, 0x00, 0x00, 0x00, 0x00},
    8333,
    {{"seed.bitcoin.jonasschnelli.ch"}, 0},
};
    //{0x1c, 0xb8}, {0x1c, 0xbd},

int getCurrencyChainType(const char *currency, const char *key)
{   
    size_t i, n = sizeof(currency_type)/sizeof(currency_type[0]);
    for (i=0; i<n; i++) {
       if ((memcmp(currency, currency_type[i].name, currency_type[i].len) == 0)&&
           (memcmp(key, currency_type[i].key, KEY_LABEL_LEN) == 0)) return currency_type[i].type;
    }
    return 0;
}

int currencyVerify(const char *currency)
{   
    size_t i, n = sizeof(currency_type)/sizeof(currency_type[0]);
    for (i=0; i<n; i++) {
       if ((memcmp(currency, currency_type[i].name, currency_type[i].len) == 0)) return 1;
    }
    return 0;
}
